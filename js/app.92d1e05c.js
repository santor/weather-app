(function(e){function t(t){for(var n,c,s=t[0],i=t[1],u=t[2],l=0,h=[];l<s.length;l++)c=s[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&h.push(o[c][0]),o[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(h.length)h.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var i=r[s];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/weather-app/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0e46":function(e,t,r){},"1c95":function(e,t,r){},"45fc":function(e,t,r){"use strict";r("1c95")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),o=r("5530"),a=r("ab42"),c={couldNotFetchCurrent:"Die aktuelle Prognose konnte nicht abgerufen werden.",couldNotFetchDaily:"Die wöchentliche Vorhersage konnte nicht abgerufen werden.",couldNotFetchHourly:"Die stündliche Vorhersage konnte nicht abgerufen werden.",error:"Fehler",searchLocation:"Ort suchen",day_1:"Montag",day_2:"Dienstag",day_3:"Mittwoch",day_4:"Donnerstag",day_5:"Freitag",day_6:"Samstag",day_0:"Sonntag",day_abbr_1:"Mo",day_abbr_2:"Di",day_abbr_3:"Mi",day_abbr_4:"Do",day_abbr_5:"Fr",day_abbr_6:"Sa",day_abbr_0:"So",clear:"klar",haze:"Hochnebel",few_clouds:"leicht bewölkt",scattered_clouds:"wolkig",broken_clouds:"stark bewölkt",overcast_clouds:"bedeckt",rain:"Regen",heavy_rain:"starker Regen",heavy_rain_shower:"bedeckt, Regenschauer",snow:"Schnee",snow_rain:"Schneeregen",fog:"Nebel",heavy_snow:"starker Schneefall",rain_shower_thunderstorm:"Regenschauer, Gewitter",snow_shower:"Schneeschauer",snow_shower_thunderstorm:"Schneeschauer, Gewitter",snow_rain_shower:"Schneeregenschauer",snow_rain_shower_thunderstorm:"Schneeregenschauer, Gewitter",sun_rain_shower:"leicht bewölkt, Regenschauer",clouds_rain_shower:"bewölkt, Regenschauer",sun_rain_shower_thunderstorm:"leicht bewölkt, Regenschauer, Gewitter",clouds_rain_shower_thunderstorm:"bewölkt, Regenschauer, Gewitter",sun_snow_shower:"leicht bewölkt, Schneeschauer",clouds_snow_shower:"bewölkt, Schneeschauer",sun_snow_shower_thunderstorm:"leicht bewölkt, Schneeschauer, Gewitter",clouds_snow_shower_thunderstorm:"bewölkt, Schneeschauer, Gewitter",sun_snow_rain_shower:"leicht bewölkt, Schneeregenschauer",clouds_snow_rain_shower:"bewölkt, Schneeregenschauer",sun_snow_rain_shower_thunderstorm:"leicht bewölkt, Schneeregenschauer, Gewitter",clouds_snow_rain_shower_thunderstorm:"bewölkt, Schneeregenschauer, Gewitter"},s={en:{couldNotFetchCurrent:"Could not fetch the current forecast.",couldNotFetchDaily:"Could not fetch the weekly forecast.",couldNotFetchHourly:"Could not fetch the hourly forecast.",error:"Error",searchLocation:"Search location",day_1:"Monday",day_2:"Tuesday",day_3:"Wednesday",day_4:"Thursday",day_5:"Friday",day_6:"Saturday",day_0:"Sunday",day_abbr_1:"Mon",day_abbr_2:"Tue",day_abbr_3:"Wed",day_abbr_4:"Thu",day_abbr_5:"Fri",day_abbr_6:"Sat",day_abbr_0:"Sun",clear:"Clear sky",haze:"Haze",few_clouds:"Few clouds",scattered_clouds:"Scattered clouds",broken_clouds:"Broken clouds",overcast_clouds:"Overcast clouds",rain:"Rain",heavy_rain:"heavy rain",heavy_rain_shower:"heavy rain showers",snow:"snow",snow_rain:"sleet",fog:"fog",heavy_snow:"heavy snow",rain_shower_thunderstorm:"shower rain, thunderstorm",snow_shower:"shower snow",snow_shower_thunderstorm:"shower snow, thunderstorm",snow_rain_shower:"shower sleet",snow_rain_shower_thunderstorm:"shower sleet, thunderstorm",sun_rain_shower:"scattered clouds, shower rain",clouds_rain_shower:"cloudy, shower rain",sun_rain_shower_thunderstorm:"scattered clouds, shower rain, thunderstorm",clouds_rain_shower_thunderstorm:"cloudy, shower rain, thunderstorm",sun_snow_shower:"scattered clouds, light snow",clouds_snow_shower:"cloudy, shower snow",sun_snow_shower_thunderstorm:"scattered clouds, shower snow, thunderstorm",clouds_snow_shower_thunderstorm:"cloudy, shower snow, thunderstorm",sun_snow_rain_shower:"scattered clouds, light shower sleet",clouds_snow_rain_shower:"cloudy, shower sleet",sun_snow_rain_shower_thunderstorm:"scattered clouds, shower sleet, thunderstorm",clouds_snow_rain_shower_thunderstorm:"cloudy, shower sleet, thunderstorm"},de:Object(o["a"])({},c)},i=Object(a["a"])({legacy:!1,locale:"de",fallBackLocale:"en",messages:s}),u=Object(n["withScopeId"])("data-v-11d8e76f");Object(n["pushScopeId"])("data-v-11d8e76f");var d={class:"content flex-5 p-8 md:p-16 xl:p-32"},l={class:"flex flex-row justify-between h-10"},h={class:"flex flex-col justify-end min-h-full -mt-10"},w={class:"bg-white dark:bg-gray-800 flex-2 p-8 md:p-16 xl:p-32"};Object(n["popScopeId"])();var _=u((function(e,t,r,o,a,c){var s=Object(n["resolveComponent"])("ErrorAlert"),i=Object(n["resolveComponent"])("Location"),_=Object(n["resolveComponent"])("Search"),p=Object(n["resolveComponent"])("Current"),m=Object(n["resolveComponent"])("Daily"),f=Object(n["resolveComponent"])("Hourly");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])(n["Transition"],{name:"fade"},{default:u((function(){return[o.hasError?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,"data-test":"error-alert"})):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])("header",null,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(i,{"data-test":"location",class:"self-center"}),Object(n["createVNode"])(_)])]),Object(n["createVNode"])("main",h,[Object(n["createVNode"])(p,{"data-test":"current"}),Object(n["createVNode"])(m)])]),Object(n["createVNode"])("aside",w,[Object(n["createVNode"])(f)])],64)})),p=(r("96cf"),r("1da1")),m={class:"text-lg"};function f(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createBlock"])("h1",m,Object(n["toDisplayString"])(o.locationName),1)}r("b0c0");var b=r("5502"),g={name:"Location",setup:function(){var e=Object(b["b"])(),t=Object(n["computed"])((function(){return e.state.location.name}));return{locationName:t}}};g.render=f;var y=g,v=(r("a4d3"),r("e01a"),{class:"flex-grow flex flex-col lg:flex-row justify-center mt-10 w-full items-center"}),O={class:"relative text-right ml-4 mr-4 mt-8 lg:mt-0"},j=Object(n["createVNode"])("span",{class:"absolute bg-gray-200 dark:bg-gray-800 w-40 h-40 -right-2 -top-2\r\n     rounded-full"},null,-1),k={class:"text-11xl tracking-tight font-fjalla relative","data-test":"temperature"},x=Object(n["createVNode"])("span",{class:"text-11xl font-fjalla relative right-8"}," ° ",-1),S={class:"ml-4 mr-4 mb-4"},N={class:"pt-2 pb-1","data-test":"time"},V={class:"text-6xl font-bold","data-test":"day"},D={class:"pt-3 pb-2","data-test":"description"};function C(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",v,[Object(n["createVNode"])("section",O,[j,Object(n["createVNode"])("span",k,Object(n["toDisplayString"])(o.roundedTemperature),1),x]),Object(n["createVNode"])("section",S,[Object(n["createVNode"])("p",N,Object(n["toDisplayString"])(o.date.time),1),Object(n["createVNode"])("h1",V,Object(n["toDisplayString"])(o.date.day),1),Object(n["createVNode"])("p",D,Object(n["toDisplayString"])(o.description),1)])])}r("99af"),r("7db0"),r("dca8"),r("4d90");var F=r("622f");function A(e){var t=F.find((function(t){return t.code==e}));return null===t||void 0===t?void 0:t.code_icon}function R(e){var t=F.find((function(t){return t.code==e}));return t.description}function T(e){return String(e).padStart(2,"0")}var L={LOADING:0,FAILURE:-1,SUCCESS:1};function I(e){var t=Object(b["b"])(),r=Object(n["computed"])((function(){return t.state.location.coordinates}));Object(n["watch"])(r,(function(t){e(t.latitude,t.longitude)})),Object(n["onMounted"])((function(){e(r.value.latitude,r.value.longitude)}))}Object.freeze(L);var B={name:"Current",setup:function(){var e,t,r=Object(a["b"])(),o=r.t,c=Object(b["b"])(),s=Object(n["computed"])((function(){return Math.round(c.state.current.weather.temperature)})),i=Object(n["computed"])((function(){var e=c.state.current.weather.iconCode;if(e){var t=R(e);return o(t)}return""})),u=Object(n["reactive"])({time:"",day:""});function d(e,t){c.dispatch("current/fetchCurrentWeather",{latitude:e,longitude:t}).catch((function(e){c.commit("error/addError",o("couldNotFetchCurrent")),console.log("[Current.vue] "+e)}))}function l(){var r=h(),n=1e3*(60-r.getSeconds());t=setTimeout((function(){h(),e=setInterval((function(){h()}),6e4)}),n)}function h(){var e=new Date,t=e.getHours(),r=e.getMinutes();if(u.time="".concat(T(t),":").concat(T(r)),!u.day||t+r==0){var n=e.getDay();u.day=o("day_".concat(n))}return e}return I(d),Object(n["onMounted"])((function(){l()})),Object(n["onUnmounted"])((function(){t&&clearTimeout(t),e&&clearInterval(e)})),{roundedTemperature:s,description:i,date:u}}};B.render=C;var E=B,M={class:"flex flex-row flex-wrap sm:flex-nowrap sm:flex-col justify-center xl:justify-between min-h-full"},H={class:"self-center mb-1 sm:mb-0 sm:mr-4"},G={class:"ml-2 mr-2 sm:ml-0 sm:mr-0"};function W(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createBlock"])("ul",M,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o.allDay,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{"data-test":"hourly",key:e.hours,title:e.hours,class:"m-2 md:mt-4 md:mb-4 xl:m-0 flex flex-col sm:flex-row sm:justify-center"},[Object(n["createVNode"])("div",H,[Object(n["createVNode"])("p",{"data-test":"hour-".concat(e.hours),class:"inline-block text-sm sm:text-base md:text-lg xl:text-2xl text-right"},Object(n["toDisplayString"])(e.hours),9,["data-test"])]),Object(n["createVNode"])("div",G,[Object(n["createVNode"])("i",{class:[e.icon,"wi inline-block text-xl sm:text-2xl  md:text-3xl xl:text-4xl mr-2"]},null,2),Object(n["createVNode"])("p",{"data-test":"temperature-".concat(e.hours),class:"inline-block text-lg sm:text-xl sm:font-bold xl:font-normal md:text-2xl xl:text-3xl text-left "},Object(n["toDisplayString"])(e.temperature)+"° ",9,["data-test"])])],8,["title"])})),128))])}var z={name:"Hourly",setup:function(){var e=Object(a["b"])(),t=e.t,r=Object(b["b"])(),o=Object(n["computed"])((function(){return r.state.oneDay.hourly}));function c(e,t){return s.apply(this,arguments)}function s(){return s=Object(p["a"])(regeneratorRuntime.mark((function e(n,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.dispatch("oneDay/fetchHourlyForecast",{latitude:n,longitude:o});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e["catch"](0),r.commit("error/addError",t("couldNotFetchHourly")),console.log("[Hourly.vue] "+e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),s.apply(this,arguments)}return I(c),{allDay:o,getHoursForecast:c}}};z.render=W;var U=z,P={class:"ml-4 mr-4 sm:ml-8 sm:mr-8 lg:-ml-16 lg:-mr-16 xl:-ml-32 xl:-mr-32 2xl:mx-auto 2xl:w-11/12"},q={class:"flex flex-row justify-between"},$=Object(n["createVNode"])("li",{class:"align-center hidden lg:block"},[Object(n["createVNode"])("div",{class:"bg-gray-300 dark:bg-gray-700 h-px w-16 2xl:w-12 relative top-1/2 ml-8 mr-8"})],-1),J=Object(n["createVNode"])("li",{class:"align-center hidden lg:block"},[Object(n["createVNode"])("div",{class:"bg-gray-300 dark:bg-gray-700 h-px w-16 2xl:w-12 relative top-1/2 ml-8 mr-8"})],-1);function Q(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createBlock"])("section",P,[Object(n["createVNode"])("ul",q,[$,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o.days,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:e.dayOfWeek,"data-test":"day"},[Object(n["createVNode"])("h2",{class:"text-lg","data-test":"day-".concat(e.dayOfWeek)},Object(n["toDisplayString"])(o.t("day_abbr_".concat(e.dayOfWeek))),9,["data-test"]),Object(n["createVNode"])("i",{class:["wi text-lg",o.getWeatherIconName(e.iconCode)]},null,2),Object(n["createVNode"])("p",{class:"font-bold","data-test":"temp-".concat(e.dayOfWeek)},Object(n["toDisplayString"])(e.tempAvg)+"° ",9,["data-test"])])})),128)),J])])}var Z={name:"Daily",setup:function(){var e=Object(a["b"])(),t=e.t,r=Object(b["b"])(),o=Object(n["computed"])((function(){return r.state.daily.days}));function c(e,t){return s.apply(this,arguments)}function s(){return s=Object(p["a"])(regeneratorRuntime.mark((function e(n,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.dispatch("daily/fetchSevenDaysForecast",{latitude:n,longitude:o});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e["catch"](0),r.commit("error/addError",t("couldNotFetchDaily")),console.log("[Daily.vue] "+e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),s.apply(this,arguments)}return I(c),{t:t,days:o,getWeatherIconName:A,getSevenDaysForecast:c}}};Z.render=Q;var K=Z,X={class:"fixed z-50 top-4 left-4 right-4 sm:right-16 sm:left-16 sm:top-8 md:left-1/4 md:right-1/4 2xl:left-1/3 2xl:right-1/3 flex items-center bg-red-500 border-1 border-l-4 border-red-700 py-2 px-3 shadow-md mb-2 rounded-lg"},Y=Object(n["createVNode"])("svg",{width:"1.8em",height:"1.8em",viewBox:"0 0 16 16",class:"bi bi-x",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[Object(n["createVNode"])("path",{"fill-rule":"evenodd",d:"M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"}),Object(n["createVNode"])("path",{"fill-rule":"evenodd",d:"M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"})],-1),ee={class:"text-white max-w-lg","data-test":"error-message"};function te(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",X,[Object(n["createVNode"])("div",{onClick:t[1]||(t[1]=function(){return o.dismiss&&o.dismiss.apply(o,arguments)}),class:"cursor-pointer text-red-500 rounded-full bg-white mr-3","data-test":"error-dismiss"},[Y]),Object(n["createVNode"])("div",ee,Object(n["toDisplayString"])(o.message),1)])}var re={name:"ErrorAlert",setup:function(){var e=Object(b["b"])(),t=Object(n["computed"])((function(){return e.state.error.errorMessage}));function r(){e.commit("error/clearError")}return{message:t,dismiss:r}}};re.render=te;var ne=re,oe={class:"flex-Wrapper"},ae={class:"hidden",for:"location-search"};function ce(e,t,r,o,a,c){var s=Object(n["resolveComponent"])("VueAutosearch");return Object(n["openBlock"])(),Object(n["createBlock"])("div",oe,[Object(n["createVNode"])("label",ae,Object(n["toDisplayString"])(o.t("searchLocation")),1),Object(n["createVNode"])(s,{id:"location-search",class:"bg-transparent",modelValue:a.selectedOption,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.selectedOption=e}),searchFunction:c.searchFunction,placeholder:o.t("searchLocation")},null,8,["modelValue","searchFunction","placeholder"])])}r("d3b7");var se=r("5980"),ie=r.n(se),ue=r("ade3"),de=r("d4ec"),le=r("bee2"),he="auth_key",we="auth_issued_at",_e="auth_expires_in",pe="curr_location",me="curr_lat",fe="curr_lon",be="Bern",ge=46.954559326171875,ye=7.420684814453125,ve=function(){function e(){Object(de["a"])(this,e)}return Object(le["a"])(e,null,[{key:"saveAuthToken",value:function(t,r,n){e._saveValue(he,t),e._saveValue(we,r),e._saveValue(_e,n)}},{key:"saveCurrentLocation",value:function(t){e._saveValue(pe,t)}},{key:"saveCurrentCoordinates",value:function(t,r){e._saveValue(me,t),e._saveValue(fe,r)}},{key:"_saveValue",value:function(e,t){localStorage.setItem(e,t)}},{key:"_loadValue",value:function(e){if(localStorage.getItem(e))try{return localStorage.getItem(e)}catch(t){localStorage.removeItem(e)}return null}}]),e}();Object(ue["a"])(ve,"getAuthToken",(function(){return ve._loadValue(he)})),Object(ue["a"])(ve,"getAuthIssuedAt",(function(){return ve._loadValue(we)})),Object(ue["a"])(ve,"getAuthExpiresIn",(function(){return ve._loadValue(_e)})),Object(ue["a"])(ve,"getLastLocation",(function(){return ve._loadValue(pe)?ve._loadValue(pe):be})),Object(ue["a"])(ve,"getLatitude",(function(){return ve._loadValue(me)?ve._loadValue(me):ge})),Object(ue["a"])(ve,"getLongitude",(function(){return ve._loadValue(fe)?ve._loadValue(fe):ye}));r("d81d"),r("ac1f"),r("5319"),r("ddb0");var Oe,je,ke=r("bc3a"),xe=r.n(ke),Se="LWPVyqeBU3i1X8e3qQHkrqK0GxQqI3Zh",Ne="vZTewOf1xeGLQUGA",Ve=btoa("".concat(Se,":").concat(Ne)),De=20,Ce="https://api.srgssr.ch/oauth/v1/accesstoken?grant_type=client_credentials",Fe="https://api.srgssr.ch/forecasts/v1.0/weather/current",Ae="https://api.srgssr.ch/forecasts/v1.0/weather/7day",Re="https://api.srgssr.ch/forecasts/v1.0/weather/24hour",Te="https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&origins=zipcode,gg25,district&searchText=",Le=function(){function e(){return Object(de["a"])(this,e),e.instance||(this.authToken=ve.getAuthToken(),e.instance=this),e.instance}return Object(le["a"])(e,[{key:"searchLocation",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe.a.get(Te+t).then((function(e){return e.data})).catch((function(e){return console.log("[api.js] Error searching location: ".concat(e))}));case 2:return r=e.sent,e.abrupt("return",r.results.map((function(e){return{id:e.id,name:e.attrs.label.replace(/<\/?[^>]+(>|$)/g,""),lat:e.attrs.lat,lon:e.attrs.lon}})));case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get24HoursForecast",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r,n){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._checkNotNull(r,n,"get24HoursForecast()"),this._isTokenValid()){t.next=5;break}return t.next=4,this._fetchAndStoreAuthToken();case 4:this.authToken=t.sent;case 5:return o=e._url(Re,r,n),t.next=8,xe.a.get(o,{headers:{Authorization:"Bearer "+this.authToken}}).then((function(e){return e.data}));case 8:if(a=t.sent,!a){t.next=11;break}return t.abrupt("return",a["24hours"].map((function(e){return{hours:new Date(e.date).getHours(),temperature:parseInt(e.values[1].ttt),icon:e.values[0].smb3}})));case 11:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"get7daysForecast",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r,n){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._checkNotNull(r,n,"get7daysForecast()"),this._isTokenValid()){t.next=5;break}return t.next=4,this._fetchAndStoreAuthToken();case 4:this.authToken=t.sent;case 5:return o=e._url(Ae,r,n),t.next=8,xe()(o,{headers:{Authorization:"Bearer "+this.authToken}}).then((function(e){return e.data}));case 8:if(a=t.sent,!a){t.next=11;break}return t.abrupt("return",a["7days"].map((function(t){return{dayOfWeek:e._getDayFromDate(t.date),tempAvg:e._getAverageFromStrings(t.values[0].ttn,t.values[2].ttx),iconCode:t.values[1].smbd}})));case 11:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"_checkNotNull",value:function(e,t,r){if(!e||!t)throw Error("[api.js] ".concat(r," latitude and longitude should be specified"))}},{key:"getCurrentForecast",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r,n,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._checkNotNull(r,n,"getCurrentForecast()"),ve.saveCurrentCoordinates(r,n),o&&ve.saveCurrentLocation(o),this._isTokenValid()){t.next=7;break}return t.next=6,this._fetchAndStoreAuthToken();case 6:this.authToken=t.sent;case 7:return t.next=9,this._fetchCurrentForecast(e._url(Fe,r,n));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));function r(e,r,n){return t.apply(this,arguments)}return r}()},{key:"_fetchCurrentForecast",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe()(t,{headers:{Authorization:"Bearer "+this.authToken}}).then((function(e){return e.data}));case 2:if(n=e.sent,!n){e.next=7;break}return o=n.info.name.de,r||ve.saveCurrentLocation(o),e.abrupt("return",{location:o,iconCode:n.current_hour[0].values[0].smb3,temperature:n.current_hour[0].values[1].ttt});case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_isTokenValid",value:function(){return this.authToken&&this._notExpired()}},{key:"_notExpired",value:function(){var e=ve.getAuthIssuedAt(),t=ve.getAuthExpiresIn(),r=(new Date).getTime();return r<e+t-De}},{key:"_fetchAndStoreAuthToken",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe()(Ce,{method:"POST",headers:{Authorization:"Basic ".concat(Ve)}}).then((function(e){return e.data}));case 2:if(t=e.sent,!t){e.next=9;break}return r=t.access_token,n=t.issued_at,o=t.expires_in,ve.saveAuthToken(r,n,o),e.abrupt("return",r);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"_getAverageFromStrings",value:function(e,t){var r=parseInt((parseFloat(e)+parseFloat(t))/2);return r=0===r?0:r,r}},{key:"_getDayFromDate",value:function(e){var t=new Date(e+"T01:00:00");return t.getDay()}},{key:"_url",value:function(e,t,r){return"".concat(e,"?latitude=").concat(t,"&longitude=").concat(r)}}]),e}(),Ie=new Le,Be=Ie,Ee="location",Me="setLocationById",He="setSearchResult",Ge="searchForLocation",We="clearLocationName",ze="updateLocationName",Ue="updateCoordinates";function Pe(e){return"".concat(Ee,"/").concat(e)}var qe=Pe(Me),$e=Pe(Ge),Je=Pe(We),Qe=(Pe(ze),Pe(Ue)),Ze={namespaced:!0,state:{name:ve.getLastLocation(),coordinates:{latitude:ve.getLatitude(),longitude:ve.getLongitude()},suggestions:[]},getters:{known:function(e){return""!=e.name}},mutations:(Oe={},Object(ue["a"])(Oe,We,(function(e){e.name=""})),Object(ue["a"])(Oe,ze,(function(e,t){e.name=t})),Object(ue["a"])(Oe,Ue,(function(e,t){e.coordinates=t})),Object(ue["a"])(Oe,He,(function(e,t){e.suggestions=t})),Oe),actions:(je={},Object(ue["a"])(je,Ge,(function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,console.assert(t.length>=2),r.next=4,Be.searchLocation(t);case 4:o=r.sent,n(He,o||[]);case 6:case"end":return r.stop()}}),r)})))()})),Object(ue["a"])(je,Me,(function(e,t){var r=e.state,n=e.commit,o=r.suggestions.find((function(e){return e.id===t}));o&&(n(Ue,{latitude:o.lat,longitude:o.lon}),n(ze,o.name))})),je)},Ke={name:"Search",components:{VueAutosearch:ie.a},data:function(){return{selectedOption:null,searchTimeoutId:null}},methods:{searchFunction:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){if(t.searchTimeoutId&&clearTimeout(t.searchTimeoutId),e.length<2)return r({message:""});t.searchTimeoutId=setTimeout(Object(p["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch($e,e);case 2:return n.abrupt("return",r({result:t.$store.state.location.suggestions}));case 3:case"end":return n.stop()}}),n)}))),300)})));case 1:case"end":return r.stop()}}),r)})))()}},watch:{selectedOption:function(e){e&&this.$store.dispatch(qe,e.id)}},setup:function(){var e=Object(a["b"])(),t=e.t;return{t:t}}};Ke.render=ce;var Xe=Ke,Ye={name:"App",components:{Location:y,Hourly:U,Daily:K,Current:E,ErrorAlert:ne,Search:Xe},setup:function(){var e=Object(b["b"])(),t=Object(n["computed"])((function(){return e.getters["error/hasError"]}));function r(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(o)}function o(t){var r=t.coords.latitude,n=t.coords.longitude;e.commit(Je),e.commit(Qe,{latitude:r,longitude:n})}return Object(n["onMounted"])(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})))),{hasError:t}}};r("45fc");Ye.render=_,Ye.__scopeId="data-v-11d8e76f";var et=Ye,tt={namespaced:!0,state:{errorMessage:""},getters:{hasError:function(e){return""!=e.errorMessage}},mutations:{addError:function(e,t){e.errorMessage=t},clearError:function(e){e.errorMessage=""}}},rt={namespaced:!0,state:{loadingState:L.LOADING,weather:{location:"",temperature:0,iconCode:""}},getters:{hasData:function(e){return e.loadingState===L.SUCCESS}},mutations:{updateWeather:function(e,t){e.weather=t},updateState:function(e,t){e.loadingState=t}},actions:{fetchCurrentWeather:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("updateState",L.LOADING),r.next=4,Be.getCurrentForecast(t.latitude,t.longitude).catch((function(e){throw n("updateState",L.FAILURE),Error(e)}));case 4:o=r.sent,o&&(n("updateState",L.SUCCESS),n("updateWeather",o));case 6:case"end":return r.stop()}}),r)})))()}}},nt={namespaced:!0,state:{loadingState:L.LOADING,days:[]},mutations:{updateDays:function(e,t){e.days=t},updateState:function(e,t){e.loadingState=t}},actions:{fetchSevenDaysForecast:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("updateState",L.LOADING),r.next=4,Be.get7daysForecast(t.latitude,t.longitude).then((function(e){n("updateState",L.SUCCESS),n("updateDays",e)})).catch((function(e){throw n("updateState",L.FAILURE),Error(e)}));case 4:case"end":return r.stop()}}),r)})))()}}},ot=(r("4160"),r("159b"),{namespaced:!0,state:{loadingState:L.LOADING,hourly:[]},mutations:{updateHours:function(e,t){e.hourly=t},updateState:function(e,t){e.loadingState=t}},actions:{fetchHourlyForecast:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("updateState",L.LOADING),r.next=4,Be.get24HoursForecast(t.latitude,t.longitude).then((function(e){e.forEach((function(e){var t=A(e.icon);e.icon=t||e.icon,e.hours="".concat(T(e.hours),":00"),e.time=parseInt(e.time)%12})),n("updateState",L.SUCCESS),n("updateHours",e)})).catch((function(e){throw n("updateState",L.FAILURE),Error(e)}));case 4:case"end":return r.stop()}}),r)})))()}}}),at=Object(b["a"])({strict:!1,modules:{error:tt,location:Ze,current:rt,daily:nt,oneDay:ot}});r("0e46");Object(n["createApp"])(et).use(at).use(i).mount("#app")},"622f":function(e){e.exports=JSON.parse('[{"code":"1","code_icon":"wi-day-sunny","description":"clear"},{"code":"2","code_icon":"wi-day-fog","description":"haze"},{"code":"3","code_icon":"wi-day-cloudy","description":"scattered_clouds"},{"code":"4","code_icon":"wi-day-showers","description":"clouds_rain_shower"},{"code":"5","code_icon":"wi-day-storm-showers","description":"clouds_rain_shower_thunderstorm"},{"code":"6","code_icon":"wi-day-snow","description":"clouds_snow_shower"},{"code":"7","code_icon":"wi-day-snow-thunderstorm","description":"clouds_snow_shower_thunderstorm"},{"code":"8","code_icon":"wi-day-rain-mix","description":"clouds_snow_rain_shower"},{"code":"9","code_icon":"wi-day-sleet-storm","description":"clouds_snow_rain_shower_thunderstorm"},{"code":"10","code_icon":"wi-day-cloudy-high","description":"few_clouds"},{"code":"11","code_icon":"wi-day-sprinkle","description":"sun_rain_shower"},{"code":"12","code_icon":"wi-day-sleet-storm","description":"sun_rain_shower_thunderstorm"},{"code":"13","code_icon":"wi-day-snow-wind","description":"sun_snow_shower"},{"code":"14","code_icon":"wi-day-snow-thunderstorm","description":"sun_snow_shower_thunderstorm"},{"code":"15","code_icon":"wi-day-rain-mix","description":"sun_snow_rain_shower"},{"code":"16","code_icon":"wi-day-sleet-storm","description":"sun_snow_rain_shower_thunderstorm"},{"code":"17","code_icon":"wi-fog","description":"fog"},{"code":"18","code_icon":"wi-cloudy","description":"overcast_clouds"},{"code":"19","code_icon":"wi-cloudy","description":"broken_clouds"},{"code":"20","code_icon":"wi-showers","description":"rain"},{"code":"21","code_icon":"wi-snow","description":"snow"},{"code":"22","code_icon":"wi-rain-mix","description":"snow_rain"},{"code":"23","code_icon":"wi-rain","description":"heavy_rain"},{"code":"24","code_icon":"wi-snow-wind","description":"heavy_snow"},{"code":"25","code_icon":"wi-hail","description":"heavy_rain_shower"},{"code":"26","code_icon":"wi-thunderstorm","description":"rain_shower_thunderstorm"},{"code":"27","code_icon":"wi-snow-wind","description":"snow_shower"},{"code":"28","code_icon":"wi-storm-showers","description":"snow_shower_thunderstorm"},{"code":"29","code_icon":"wi-rain-mix","description":"snow_rain_shower"},{"code":"30","code_icon":"wi-storm-showers","description":"snow_rain_shower_thunderstorm"},{"code":"-1","code_icon":"wi-night-clear","description":"clear"},{"code":"-2","code_icon":"wi-night-fog","description":"haze"},{"code":"-3","code_icon":"wi-night-alt-cloudy","description":"scattered_clouds"},{"code":"-4","code_icon":"wi-night-alt-rain","description":"clouds_rain_shower"},{"code":"-5","code_icon":"wi-night-thunderstorm","description":"clouds_rain_shower_thunderstorm"},{"code":"-6","code_icon":"wi-night-alt-snow-wind","description":"clouds_snow_shower"},{"code":"-7","code_icon":"wi-night-snow-thunderstorm","description":"clouds_snow_shower_thunderstorm"},{"code":"-8","code_icon":"wi-night-rain-mix","description":"clouds_snow_rain_shower"},{"code":"-9","code_icon":"wi-night-sleet-storm","description":"clouds_snow_rain_shower_thunderstorm"},{"code":"-10","code_icon":"wi-night-alt-partly-cloudy","description":"few_clouds"},{"code":"-11","code_icon":"wi-night-showers","description":"sun_rain_shower"},{"code":"-12","code_icon":"wi-night-alt-storm-showers","description":"sun_rain_shower_thunderstorm"},{"code":"-13","code_icon":"wi-night-snow","description":"sun_snow_shower"},{"code":"-14","code_icon":"wi-night-snow-thunderstorm","description":"sun_snow_shower_thunderstorm"},{"code":"-15","code_icon":"wi-night-rain-mix","description":"sun_snow_rain_shower"},{"code":"-16","code_icon":"wi-night-sleet-storm","description":"sun_snow_rain_shower_thunderstorm"},{"code":"-17","code_icon":"wi-night-fog","description":"fog"},{"code":"-18","code_icon":"wi-night-cloudy","description":"overcast_clouds"},{"code":"-19","code_icon":"wi-night-cloudy","description":"broken_clouds"},{"code":"-20","code_icon":"wi-night-showers","description":"rain"},{"code":"-21","code_icon":"wi-night-snow","description":"snow"},{"code":"-22","code_icon":"wi-night-rain-mix","description":"snow_rain"},{"code":"-23","code_icon":"wi-night-rain","description":"heavy_rain"},{"code":"-24","code_icon":"wi-night-snow-wind","description":"heavy_snow"},{"code":"-25","code_icon":"wi-night-hail","description":"heavy_rain_shower"},{"code":"-26","code_icon":"wi-night-thunderstorm","description":"rain_shower_thunderstorm"},{"code":"-27","code_icon":"wi-night-snow-wind","description":"snow_shower"},{"code":"-28","code_icon":"wi-night-storm-showers","description":"snow_shower_thunderstorm"},{"code":"-29","code_icon":"wi-night-rain-mix","description":"snow_rain_shower"},{"code":"-30","code_icon":"wi-night-storm-showers","description":"snow_rain_shower_thunderstorm"}]')}});
//# sourceMappingURL=app.92d1e05c.js.map